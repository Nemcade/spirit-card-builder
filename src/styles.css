/* Animateable custom property for conic-gradient start angle */
@property --holo-angle {
  syntax: '<angle>';
  inherits: false;
  initial-value: 0deg;
}

/* Local Nunito (variable TTF) — used by preview and export */
@font-face{
  font-family: 'Nunito';
  src: url('/fonts/Nunito-VariableFont_wght.ttf') format('truetype');
  font-weight: 100 900;   /* supports the whole variable range */
  font-style: normal;
  font-display: swap;     /* use fallback until Nunito is ready, then swap in */
}



@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Uncial+Antiqua&display=swap');


/* ======================================================================
   Spirit Card Creator – stylesheet (cleaned)
   ====================================================================== */

:root{
  --skill-dot-size: 20px;
  --skill-dot-gap: 0px;

  --value-dot-size: 25px;
  --value-dot-overlap: 2px;

  --inline-ico-size: 16px;
  
  
  --title-wrap-w: 350px;    /* fixed width for the centered title box */
  --title-edge-pad: 4px;    /* corner icon inset */

  --header-h: 36px;      /* ← choose your exact bar height */
  --footer-bar-height: 12px;
  --page-gutter-x: 16px;  /* left/right */
  --page-gutter-y: 12px;  /* top/bottom */
  
  --card-title-font: 'Nunito', system-ui, sans-serif;
  --card-body-font:  'Nunito', sans-serif;
  
  --title-row-h: 52px;       /* the dial you move for bigger/smaller */
  --title-ico-w: 36px;       /* fixed width for both icon slots */
  
  --title-h: 48px; /* try 48–60px to taste */
  --skill-title-h: 18px;
  --prof-title-h: 18px;
  --footer-rarity-h: 15px;
  --footer-rarity-pad-right: 8px;
  --back-type-h: 20px;
  
    /* Proficiency (right side of skill bar) */
  --prof-size: .75rem;
  --prof-weight: 600;

  /* Skill title (center of skill bar) */
  --skill-title-size: 0.94rem;
  --skill-title-weight: 800;
  
  --skill-stroke:     2px;      /* outline thickness (optional) */
  --prof-stroke:      2px;
  
  --gap-to-next-skill: 6px;
  
  --accent-grad-angle: 60deg;
  --accent-grad-speed: 8s;
  
  --rule-thickness: 1px;      /* line thickness */
  --rule-color: rgba(0,0,0,.35);
  --rule-gap: 3px;            /* space above/below the rule */
  
}

@media (min-width: 768px){
  :root{ --page-gutter-x: 20px; }
}
@media (min-width: 1280px){
  :root{ --page-gutter-x: 24px; }
}

/* Layout shell */
.app-grid{
  display:grid; grid-template-columns:minmax(360px,auto) 1fr;
  gap:16px; align-items:flex-start;
  min-width: 0;
  overflow-x: hidden;
  
}
aside{ position:sticky; top:16px; }

/* Resets */
*{ box-sizing:border-box }
html,body{
  margin:0; padding:0;
  font-family:'Nunito',system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:#222; background:#e6e6e6;
  padding: var(--page-gutter-y) var(--page-gutter-x);
}

/* Inputs */
input, select, textarea, button, label{ font: inherit; }
input, select, textarea{
  width:100%; padding:8px 10px;
  border:1px solid #bbb; border-radius:6px;
  background:#fff; color:#111;
}
textarea{ min-height:80px; resize:vertical }
button{
  padding:8px 10px; border:1px solid #bbb; border-radius:6px;
  background:#f6f6f6; cursor:pointer;
}
button:hover{ background:#eee }

/* ======================================================================
   Card + flip
   ====================================================================== */
.card{
  width:360px; height:504px; aspect-ratio:5/7;
  position:relative; perspective:1000px; cursor:pointer; transform-style: preserve-3d;
  font-family: var(--card-body-font);
  display:flex;
  flex-direction: column;
  
  font-weight: 600; /* ← change this (e.g., 500 or 600) */
  
}

.card-header{
  position: relative;
  height: var(--header-h);
  flex: 0 0 var(--header-h);   /* ← key line: fixes the lane in flex */
  flex-shrink: 0;              /* belt & suspenders */
}

.card-main, .card-body, .skills, .content {
  flex: 1 1 auto;
  min-height: 0;              /* prevents flex overflow from stealing space */
}

.card-header .title-lane{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  padding: 0 12px;            /* horizontal breathing room */
  z-index: 1;                  /* above the colored bar */
}

.card .front,
.card .back{
  position:absolute; inset:0; height:100%;
  overflow:hidden; backface-visibility:hidden; transition:transform .6s;
  background:#fff; box-sizing:border-box;
}
.card .back      { transform:rotateY(180deg); backface-visibility: hidden; }
.card.flip .front{ transform:rotateY(180deg); }
.card.flip .back { transform:rotateY(360deg); }


/* ======================================================================
   FRONT
   ====================================================================== */
.front{ display:flex; flex-direction:column }
.front, .front *{ backface-visibility: hidden; }

.front .front-overlay{
  position:absolute; inset:0; z-index:3; pointer-events:none; object-fit:cover;
}

.front-overlay{ z-index: 3; }

/* Title */
/* Title lane — consolidated and constrained */
.title-row{
  /* knobs */
  --ico-w: 33px;            /* icon box width/height */
  --edge-pad: 10px;         /* inset from card edges */
  --ico-nudge-left: -6px;   /* move left icon toward edge (neg = left) */
  --ico-nudge-right: 6px;   /* move right icon toward edge (pos = right) */

  position: relative;
  display: grid;
  grid-template-columns: var(--ico-w) 1fr var(--ico-w);
  column-gap: 6px;

  height: 52px;             /* <-- keep the lane fixed height */
  padding: 0 var(--edge-pad);
  align-items: center;
  color: #fff;
  overflow: hidden;
  
}

/* Fixed-size centered title wrapper */
.title-row .card-name-wrap.fixed{
  width: var(--title-wrap-w);
  height: var(--title-row-h);
  margin: 0 auto;           /* center in the lane */
  display: flex;
  align-items: center;
  justify-content: center;
  transform: translateX(-5px); 
}

/* Corner icons (outside the grid, independent of title sizing) */
.front .corner-ico{
  position: absolute;
  top: var(--title-edge-pad);
  width: var(--title-ico-w);
  height: var(--title-ico-w);
  object-fit: contain;
  pointer-events: none;
  z-index: 5;               /* under the overlay frame (z=3), above strip */
}
.front .type-ico-fixed  { left:  var(--title-edge-pad); }
.front .weight-ico-fixed{ right: var(--title-edge-pad); }


/* the SVG wrapper must fill the lane */
.title-row .card-name-wrap{
  display: flex;
  align-items: center;
  height: 100%;
}

.card-name-wrap {
  flex: 1 1 0;
  min-width: 0;       /* allows SVG to use all remaining width */
  height: 100%;
  position: relative;
}

/* Any icons in the same row */
.name-icon {
  flex: 0 0 var(--name-icon-size, 28px);
  width: var(--name-icon-size, 28px);
  height: var(--name-icon-size, 28px);
}

/* the SVG itself fills the wrapper (so our fitter can size it) */
.card-name-svg{
  display: block;
  width: 100%;
  height: 100%;
  overflow: visible;
}

/* accent strip behind content */
.title-row::before{
  content: "";
  position: absolute; inset: 0;
  background: var(--accent, #3a1856);
  z-index: 0;
}

/* keep icons/text above the strip */
.title-row > *{ position: relative; z-index: 4; }

.front .title-row .ico-slot{
  width: var(--title-ico-w);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* icon sizing unchanged */
.ico-slot{ width: var(--ico-w); height: var(--ico-w); display:flex; align-items:center; justify-content:center; }
.type-ico, .weight-ico{ width:100%; height:100%; object-fit:contain; }
.title-row .ico-slot:first-child{ transform: translateX(var(--ico-nudge-left)); }
.title-row .ico-slot:last-child { transform: translateX(var(--ico-nudge-right)); }

.front .title-row{
  display: grid;
  grid-template-columns: var(--title-icon-w) 1fr var(--title-icon-w);
  align-items: center;
  height: var(--title-row-h);
  flex: 0 0 var(--title-row-h);  /* ← fixes the lane height in flex layout */
  overflow: visible;             /* keep the nice overlap under the overlay */
}

.front .title-row .ico-left,
.front .title-row .ico-right{
  width: var(--title-icon-w);
  height: var(--title-row-h);
  display:flex;
  align-items:center;
  justify-content:center;
  pointer-events:none;
}

.front .title-row .name-cell{
  height:100%;
  overflow:visible;
}


/* optional: nudge icons slightly upward (your existing tweak) */
.front .title-row .type-ico,
.front .title-row .weight-ico{ transform: translateY(-3px); }

.card-name{
  flex: 1;              /* harmless in grid, OK if you keep it */
  min-width: 0;         /* critical so it can shrink */
  margin: 0 8px;
  text-align: center;
  font-weight: 700;
  letter-spacing: .02em;
  line-height: 1.2;
  font-size: 20px;      /* base size; AutoShrinkTitle will lower it as needed */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  z-index: 4;           /* above the ::before accent */
  /* keep your existing sizing/spacing above this line */
  font-family: var(--card-title-font);
  color: white;
  position: relative;
  z-index: 4; /* above overlay; overlay z-index is 3 */

}




/* Skills */
.skills{
  position:relative; z-index:4;
  flex:1 1 auto; min-height:0; overflow-y:auto; padding:1rem;
  overflow-x: visible;
}
.skills::-webkit-scrollbar{ width:0; height:0 }
.skills{ -ms-overflow-style:none; scrollbar-width:none }

/* Right-side proficiency text */
.skill-header .prof-text,
.skill-header span:last-child{
  font-weight: var(--prof-weight);
  font-size: var(--prof-size);
  letter-spacing: .01em;
  justify-self: end;
  text-align: right;
  color: #fff;
}

/* Center skill title uses knobs */
.skill-title{
  font-weight: var(--skill-title-weight);
  font-size: var(--skill-title-size);
 
}


.skills p{
  color:#000; margin:0 0 .8rem; font-size:.85rem; line-height:1.15rem; text-wrap:pretty;
}

.skills p.skill-text{
  display: flow-root; /* contains .emoji-lead floats so --- won't clear them */
  margin: 0;
  padding: 0;
  white-space: pre-wrap;
}
.skills p.skill-text {                        /* re-apply just what we want */
  display: flow-root;        /* ✅ contains floated .emoji-lead inside this paragraph */
  color: #000;
  font-size: .85rem;
  line-height: 1.20;         /* line spacing inside paragraphs */
  margin: 0 0 5px;           /* gap between paragraphs */
  padding: 0 3px;            /* horizontal inset inside the text box */
  text-wrap: pretty;
  white-space: normal !important;
}


.skills p.skill-text .li-bullet{
  display: inline-block;
  width: 1em;             /* consistent bullet column */
  transform: translateY(-1px);
}

/* Normalize markdown lists inside skills so "-" doesn't change indentation */
.skills ul,
.skills ol{
  margin: 0;
  padding: 0;
}

.skills li{
  list-style: none;
  margin: 0;
  padding: 0;

  /* Contain floats inside list items too (same intent as p.skill-text::after) */
  display: flow-root;
}


/* Base rule style everywhere (skills + flavor + anywhere else formatText is used) */
.rule{
  display: block;
  height: 0;
  border: 0;
  border-top: var(--rule-thickness) solid var(--rule-color);
  margin: var(--rule-gap) 0;
}

/* Keep your skill-specific layout protections */
.skills .rule{
  clear: none;                 /* don't collide with leading floated icons */
  break-inside: avoid-column;  /* keep it intact within the column */
}


/* Keyword accents */
.kwd{
  font-weight:800; color:inherit; text-decoration:none; white-space:normal;
  background-image:linear-gradient(currentColor,currentColor);
  background-size:100% 0.06em; background-position:0 88%; background-repeat:no-repeat;
}
.kwd.nowrap{ white-space:nowrap; }

strong.kwd.nowrap:not(.kwd-title),
b.kwd.nowrap:not(.kwd-title){
  color: var(--accent-ink, var(--accent, #3a1856));
  background-image: none !important;
  text-decoration: none !important;
  font-weight: 800;
  
}
em.kwd.kwd-em.nowrap{
  color: var(--accent-ink, var(--accent, #3a1856));
  background-image:none !important;
  text-decoration:none !important;
  font-style:italic; font-weight:800;
}

.kwd-title,
.kwd.title{
  font-weight:900; color:var(--accent,#3a1856); text-decoration:none;
  background-image:linear-gradient(var(--accent,#3a1856), var(--accent,#3a1856));
  background-size:100% 0.14em; background-position:0 90%; background-repeat:no-repeat;
 
}

strong.kwd.kwd-title.nowrap,
strong.kwd.kwd.title.nowrap,
b.kwd.kwd-title.nowrap,
b.kwd.kwd.title.nowrap{
  color:var(--accent,#3a1856);
  background-image:linear-gradient(var(--accent,#3a1856), var(--accent,#3a1856));
}

/* Dots/headers */
.skills b, .skills strong{ font-weight:800 }

/* Two columns: [title | proficiency]  */
.skill-header{
  position: relative;
  margin-bottom: 6px;
  display: grid;
  grid-template-columns: 1fr 1fr;   /* ← was 1fr auto 1fr */
  align-items: center;
  gap: 4px;
  background: var(--accent, #3a1856);
  color: #fff;
  padding: 3px 0;
  border-radius: 0;
  overflow: visible;

  /* your existing overlay knobs can stay here… */
  --ov-height: 10%;
  --ov-inset: 0px;
  --ov-opacity: 1;
  --ov-bleed-x: 1px;
  --ov-bleed-y: 1px;
}

/* Title wrapper stays left-aligned (you already have this) */
.skill-header .skill-title-wrap{
  height: var(--skill-title-h);
  display:flex; align-items:center; justify-content:flex-start;
  padding-left: var(--skill-title-pad-left, 0px);
  
}

/* Proficiency wrapper stays right-aligned (you already have this) */
.skill-header .prof-wrap{
  height: var(--prof-title-h);
  display:flex; align-items:center; justify-content:flex-end;
  justify-self: end;
  padding-right: var(--prof-title-pad-right, 0px);
}

/* Dots: remove from flow and float centered over the bar */
.skill-header .dots{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%,-50%);  /* perfectly centered */
  display: inline-flex;
  gap: var(--skill-dot-gap);
  white-space: nowrap;
  pointer-events: none;              /* purely decorative */
  z-index: 2;                        /* above text if you like; drop to 1 if needed */
}
.skill-header .dots img{
  width: var(--skill-dot-size);
  height: var(--skill-dot-size);
}

.skill-title{
  font-weight:700;
  font-size:.90rem;
  line-height:1.5;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  min-width:0;
    font-family: var(--card-title-font);
  letter-spacing: .02em;
  
}

.skill-header .skill-overlay{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:contain; pointer-events:none;
  display:none !important;
}
.skill-header span:last-child{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

.skill-header::before{
  content: "";
  position: absolute;
  inset: 0;
  z-index: 0;
  /* draw PNG linework OVER the gradient in one declaration */
  background:
    var(--skill-overlay) center/cover no-repeat,
    var(--accent-grad, var(--accent));
  pointer-events: none;

  /* bleed controls (keep if you like) */
  left: calc(-1 * var(--ov-bleed-x));
  width: calc(100% + (var(--ov-bleed-x) * 2));
  top:    calc(-3 * var(--ov-bleed-y));
  bottom: calc(-2.1 * var(--ov-bleed-y));
  right: auto;

  opacity: var(--ov-opacity);
}

/* keep all header content above the gradient/overlay layer */
.skill-header > * { position: relative; z-index: 1; }


/* Footer */
.card-footer{
  position: relative;
  height: 30px;                 /* fixed lane height */
  display: flex;
  align-items: center;
  padding: 0 10px;
  padding-right: 0px;
  background: none !important;
  border: 0 !important;

}
.card-footer::before{
  content:"";
  position:absolute; left:0; right:0; bottom:0;
  height:30px;
  background: var(--accent-grad, var(--accent,#3a1856));
  z-index:0;
}
.footer-left,
.footer-right{
  position: relative;           /* sit above ::before */
  z-index: 1;
  display: flex;
  align-items: center;
}
.footer-left{
	  flex: 0 0 65%;
  justify-content: flex-start;
  overflow: hidden;             /* prevents pushing rarity */
  /* keep space even when there are no dots */
  min-height: 1px;
}

.footer-right{ 
  flex: 0 0 35%;
  justify-content: flex-end;    /* right align text */
  min-width: 0;                 /* allow text to shrink rather than overflow */
}

.value-dot{
  width:var(--value-dot-size); height:var(--value-dot-size); object-fit:contain;
}
.value-dot + .value-dot{ margin-left: calc(-1 * var(--value-dot-overlap)); }

/* ======================================================================
   BACK
   ====================================================================== */
.card .back{
  position:relative; height:100%;
  box-sizing:border-box;
  overflow:visible;
  background: var(--accent-grad, var(--accent,#3a1856));
}

.back-inner{
  position:absolute; inset:10px;   /* ← ring thickness */
  background:#fff;                 /* inner paper area */
  box-sizing:border-box;
  z-index:1;
}

/* Background art (under everything) */
.back-art{
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
  z-index:0;
}


/* Back lineart overlay (TOP of strip) */
.back .back-overlay{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; pointer-events:none;
  z-index:3;
}

/* -------- Back type strip (static) --------
   Adjust only these two values to position/size the strip:
   bottom: 12px;  ← move strip up/down
   height: 44px;  ← change strip height
*/
.back-type-strip{
  position:absolute;
  left:85px; right:85px;
  bottom:0px;           /* ← adjust */
  height:28px;           /* ← adjust */
  background: var(--accent-grad, var(--accent,#3a1856));
  color:#fff;
  border-radius:2px;
  align-items: flex-end;     /* push AutoFitSvgTitle to the bottom edge */
   padding:0 0px 0px;                 /* bottom nudge */
  z-index:2;             /* behind lineart, above border */
}
.back-type-strip .type-label{
  font-weight:700; font-size:.85rem; line-height: 1; white-space:nowrap;
  transform: translateY(0px);  /* + moves down, - moves up */
}


/* Flavor box (fixed clearance – adjust bottom as needed) */
.flavor-box{
  position: absolute;
  left: 20px;
  right: 20px;

  /* ← set your fixed clearance from the bottom (keep above the strip) */
  bottom: 45px;

  /* ← default minimum size when it's short/empty */
  min-height: 65px;

  /* ← optional safety so it can't run off the top; tweak 24px top margin */
  max-height: calc(100% - 24px - 64px);

  /* Content + visuals */
  background: rgba(255,255,255,1);
  border-radius: 6px;
  padding: 8px 10px;
  margin: 0;
  display: flex;
  flex-direction: column;
  flex-direction: column;
  justify-content: flex-start;

  /* Above strip & lineart for legibility */
  z-index: 4;
  box-shadow: 0 2px 6px rgba(0,0,0,.55);
}
.flavor-name{
  text-align:center; margin:0 0 3px;
  font-size:1.0rem; font-weight:900; color:var(--accent,#3a1856);
  font-family: var(--card-title-font);
}
.flavor{
  margin:0; padding:0; font-size:.9rem; line-height:1.2; color:#111;
  max-height:none; overflow:visible; text-align:center;
  font-family: var(--card-title-font);
}

/* ======================================================================
   Utilities
   ====================================================================== */
.inline-ico{
  width: var(--inline-ico-size); height: var(--inline-ico-size);
  margin:0 3px -3px 0px; vertical-align:.01em; object-fit:contain;
}
.card .skill-header{ position:relative; }

/* ======================================================================
   Export overrides – turned on via App.jsx before capture
   ====================================================================== */
.export-mode .card{ perspective:none !important; overflow:visible !important; }
.export-mode .front, 
.export-mode .back{ transform:none !important; backface-visibility:visible !important; }
.export-mode .card .back{ overflow:visible !important; }

/* --- Export: hide SVG titles, show HTML fallbacks --- */
.svg-fallback { display: none; white-space: nowrap; line-height: 1; }

/* Outline approximation so the fallback still looks “outlined” */
/.svg-fallback {
  font-family: var(--card-title-font);
  font-weight: 900;
  letter-spacing: .02em;
  color: #fff;
}

.svg-fallback { display: none !important; }

/* Card name fallback size & anti-clip */
.export-mode .title-row { overflow: visible; } /* let outline extend */
.export-mode .title-row .svg-fallback{
  font-size: calc(var(--title-h) * 0.38); /* was ~0.56; smaller = match SVG */
  letter-spacing: .012em;                 /* tiny tighten = narrower word */
  padding-left: 3px;           
  text-align: center;  /* prevents left-edge crop */
}

/* Center the fallback inside the outer wrapper during export */
.export-mode .title-row .card-name-wrap{
  justify-content: center;     /* center the fallback */
}


.skill-text{
  color: #000;
  font-size: .85rem;
  line-height: 1.23;        /* ← line spacing inside paragraphs */
  margin: 0 0 8px;         /* ← space between paragraphs */
  padding: 0 4px;           /* keep your horizontal padding */
  text-wrap: pretty;
}

/* No extra trailing gap after the last paragraph of a skill */
.skill-text:last-child{
  margin-bottom: 0;
}

/* Space between the skill header and its first paragraph (optional) */
.skill-header + .skill-text{
  margin-top: 2px;          /* add a little breathing room below header */
}

/* Space between whole skill blocks (optional) */
.skill-block + .skill-block{
  margin-top: 3px;         /* gap between different skills */
}

/* Float a leading emoji so text wraps beside it (for {...,indent}) */
.skills .emoji-lead{
  float: left;
  width: var(--indent, 1.2em);
  margin: 0 0.3em 0 0;

  /* Key fix: prevent the float from being “taller than a line” */
  height: 1em;
  line-height: 1;
  display: flex;
  align-items: center;
}



/* If the icon is leading, remove the default inline gap from the inner wrap */
.skills .emoji-lead .emoji-wrap{ margin: 0; }




strong.num, .num{
  font-weight: 800;
  color: var(--accent-ink, var(--accent, #3a1856));
  text-decoration: none !important;
  background-image: none !important; /* neutralize .kwd underline if inherited */
}

/* Nudge the top-front icons up a bit */
.front .title-row .type-ico,
.front .title-row .weight-ico{
  transform: translateY(-3px);  /* raise: use -1px…-4px to taste */
}

/* Title should never show ellipsis; just fit or clip cleanly */
.front .title-row .card-name{
  min-width: 0;            /* grid/flex must allow shrinking */
  margin: 0;               /* no extra side margins stealing width */
  white-space: nowrap;
  overflow: hidden;        /* we rely on fitter to prevent overflow */
  text-overflow: clip !important;  /* never show "..." */
  font-size: 28px;         /* base size when there’s room */
  line-height: 1.2;
  letter-spacing: .02em;   /* the fitter may tweak this slightly downward only if needed */
}



/* --- required-field warning styles --- */
.field-row {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 6px;
}

.req {
  color: #d32f2f;         /* red warning dot */
  font-size: 0.9rem;
  line-height: 1;
}

.invalid {
  border-color: #d32f2f !important;
  outline-color: #d32f2f !important;
}

/* Right-aligned checkbox row (used by Printer-friendly) */
.toggle-row{
  display: grid;
  grid-template-columns: 1fr auto; /* text | checkbox */
  align-items: center;
  gap: 8px;
}
.toggle-row > span{
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.toggle-row input[type="checkbox"]{ justify-self: end; }

/* Proficiency filter rows: single line, small text, checkbox aligned right */
.prof-row{
  display: grid;
  grid-template-columns: 1fr auto; /* label | checkbox */
  align-items: center;
  gap: 8px;
}
.prof-row .ptext{
  font-size: 12px;                /* a bit smaller */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;         /* never wrap */
}
.prof-row input[type="checkbox"]{
  justify-self: end;               /* align all boxes to the right edge */
}

/* ================= THEME VARIABLES (UI only, not the card) ================ */
:root{
  color-scheme: light;
  --ui-bg:         #f3f3f6;
  --ui-surface:    #ffffff;
  --ui-text:       #222;
  --ui-muted:      #666;
  --ui-border:     #cfcfd6;
  --ui-input-bg:   #fff;
  --ui-accent:     #6a3fa0;  /* used for small UI accents (not the card) */
  --ui-accent-ink: #ffffff;
}

/* Dim theme */
[data-theme="dim"]{
  color-scheme: light dark;
  --ui-bg:         #1f1b24;
  --ui-surface:    #2a2432;
  --ui-text:       #eae4f7;
  --ui-muted:      #b9b0c9;
  --ui-border:     #3b3247;
  --ui-input-bg:   #342c3e;
  --ui-accent:     #8b5cf6;
  --ui-accent-ink: #0b0418;
}

/* Spirit (mystical purple) */
[data-theme="spirit"]{
  color-scheme: light dark;
  --ui-bg:         #16121d;
  --ui-surface:    #221a2d;
  --ui-text:       #eadcff;
  --ui-muted:      #cab7e6;
  --ui-border:     #3a2b4b;
  --ui-input-bg:   #2a2036;
  --ui-accent:     #a277ff;  /* dreamy purple */
  --ui-accent-ink: #0a0414;
}

/* Killijam (Shadow King) — acid green on pitch black */
[data-theme="killijam"]{
  color-scheme: dark;

  /* UI palette */
  --ui-bg:         #080b08;  /* near-black with a green cast */
  --ui-surface:    #0f140f;  /* panels / cards */
  --ui-text:       #e8ffe5;  /* bone-white with a mint tint */
  --ui-muted:      #a3c9a3;  /* desaturated moss */
  --ui-border:     #203020;  /* dark olive edge */
  --ui-input-bg:   #0c120c;  /* inputs/background fields */

  /* Accent = Killijam’s necro-glow */
  --ui-accent:     #9ef01a;  /* toxic/ectoplasmic green */
  --ui-accent-ink: #031003;  /* very dark green for text on accent */
}

/* (Optional) subtle glow on primary/accented controls in Killijam */
[data-theme="killijam"] .btn.primary,
[data-theme="killijam"] .zoom-btn.active{
  box-shadow: 0 0 0 1px var(--ui-accent), 0 0 12px rgba(158,240,26,.35);
}

/* Menia — pearlescent light theme */
[data-theme="menia"]{
  color-scheme: light;

  /* UI palette */
  --ui-bg:         #faf7ff;  /* pearl-lilac canvas */
  --ui-surface:    #ffffff;  /* bright surface */
  --ui-text:       #1c1024;  /* deep eggplant ink */
  --ui-muted:      #7c6a91;  /* plum-gray */
  --ui-border:     #e9defb;  /* pale lavender edge */
  --ui-input-bg:   #ffffff;

  /* Iridescent accent (lavender → shell-pink) */
  --ui-accent:     #e7b9ff;
  --ui-accent-ink: #2b0f3d;  /* dark ink on accent */
}

/* Pearlescent sheen on panels */
[data-theme="menia"] section,
[data-theme="menia"] .panel{
  background:
    linear-gradient(135deg,#ffffff 0%,#f3ecff 45%,#eefaf5 100%);
  border-color: #e9defb;
  box-shadow:
    0 0 0 1px rgba(185,150,245,.18),
    0 10px 26px rgba(74,24,134,.06);
}

/* Chips / badges / active zoom button get a soft pearl gradient */
[data-theme="menia"] .badge,
[data-theme="menia"] .pill,
[data-theme="menia"] .zoom-btn.on{
  background:
    linear-gradient(135deg, var(--ui-accent) 0%, #ffd7ff 60%, #e8fff7 100%) !important;
  color: var(--ui-accent-ink) !important;
  box-shadow: 0 0 0 1px rgba(185,150,245,.25);
}

/* Focus ring & text selection feel airy */
[data-theme="menia"] *:focus{
  outline: 2px solid #d9c2ff;
  outline-offset: 2px;
}
[data-theme="menia"] ::selection{
  background: #eed9ff; color: #1c1024;
}

/* Seranna — crimson, vampiric, silver, elegant */
[data-theme="seranna"]{
  color-scheme: dark;

  /* Core palette */
  --ui-bg:         #0b0709;   /* near-black wine */
  --ui-surface:    #150c10;   /* deep claret panel */
  --ui-text:       #f1f3f6;   /* moon-silver text */
  --ui-muted:      #c7b9c1;   /* dusty rose-silver */
  --ui-border:     #322028;   /* burgundy edge */
  --ui-input-bg:   #12090e;   /* fields */

  /* Accent = lacquered crimson */
  --ui-accent:     #d4153a;
  --ui-accent-ink: #1a0006;

  /* Optional: pure silver for icons/lines if needed */
  --ui-chrome:     #cdd1d6;
}

/* Silvered panels with subtle wine gradient */
[data-theme="seranna"] section,
[data-theme="seranna"] .panel{
  background: linear-gradient(145deg,#140b10 0%,#1a0e14 55%,#200e14 100%);
  border: 1px solid rgba(205,209,214,.18);
  box-shadow:
    0 0 0 1px rgba(74,6,22,.35),
    0 12px 30px rgba(0,0,0,.45);
}

/* Primary controls — crimson lacquer with silver rim */
[data-theme="seranna"] .btn.primary,
[data-theme="seranna"] .zoom-btn.active{
  background: linear-gradient(135deg,#d4153a 0%,#b10f2f 60%,#8d0c24 100%);
  color: var(--ui-text);
  border-color: rgba(205,209,214,.45);
  box-shadow:
    0 0 0 1px rgba(205,209,214,.35),
    0 0 16px rgba(212,21,58,.35);
}

/* Chips / badges — polished silver with wine ink */
[data-theme="seranna"] .badge,
[data-theme="seranna"] .pill{
  background: linear-gradient(180deg,#f2f4f7 0%,#cfd3d8 100%);
  color: #3b0b15;
  border: 1px solid #aeb4bb;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.35);
}

/* Links & emphasis */
[data-theme="seranna"] a,
[data-theme="seranna"] .accent{
  color: var(--ui-accent);
}

/* Inputs */
[data-theme="seranna"] input,
[data-theme="seranna"] textarea,
[data-theme="seranna"] select{
  background: var(--ui-input-bg);
  border: 1px solid #2d1a21;
  color: var(--ui-text);
}

/* Focus ring: fine silver filigree with crimson glow */
[data-theme="seranna"] *:focus{
  outline: 2px solid rgba(205,209,214,.8);
  box-shadow: 0 0 0 2px rgba(212,21,58,.35);
  outline-offset: 2px;
}

/* Text selection */
[data-theme="seranna"] ::selection{
  background: #691228;
  color: #ffffff;
}

/* Nyma — the Silent Veil (twilight smoke, parchment, witch-green) */
[data-theme="nyma"]{
  color-scheme: light; /* twilight, not fully dark */

  /* Core palette */
  --ui-bg:         #171c1a;   /* deep cold smoke */
  --ui-surface:    #1f2523;   /* softer panel smoke */
  --ui-text:       #f5efe0;   /* parchment ink */
  --ui-muted:      #aeb4ad;   /* misty gray */
  --ui-border:     #2e3431;   /* slate edge */
  --ui-input-bg:   #1b201f;

  /* Accents */
  --ui-accent:     #b8ff4a;   /* witch-green glow */
  --ui-accent-ink: #0a1207;   /* dark ink on accent */

  /* Extras for paper/smoke trims if you use them */
  --ui-paper:      #efe6cd;   /* warm parchment */
  --ui-smoke:      #222826;   /* overlay smoke */
}

/* Twilight panels: cold-smoke with a faint dream gradient */
[data-theme="nyma"] section,
[data-theme="nyma"] .panel{
  background:
    radial-gradient(120% 90% at 10% -20%, rgba(184,255,74,.08) 0%, transparent 60%),
    radial-gradient(90% 70% at 100% 0%, rgba(184,255,74,.04) 0%, transparent 70%),
    linear-gradient(145deg,#212725 0%,#1e2321 55%,#1b201f 100%);
  border: 1px solid var(--ui-border);
  box-shadow:
    0 0 0 1px rgba(184,255,74,.10),
    0 12px 26px rgba(0,0,0,.35);
  backdrop-filter: saturate(105%) blur(1.5px);
}

/* Primary controls — green rune glow on smoke */
[data-theme="nyma"] .btn.primary,
[data-theme="nyma"] .zoom-btn.active{
  background: linear-gradient(135deg,#b8ff4a 0%,#8fe62f 60%,#6dc21c 100%);
  color: var(--ui-accent-ink);
  border-color: rgba(184,255,74,.45);
  box-shadow:
    0 0 0 1px rgba(184,255,74,.55),
    0 0 16px rgba(184,255,74,.35);
}

/* Chips / badges — parchment tabs with runic glow dot */
[data-theme="nyma"] .badge,
[data-theme="nyma"] .pill{
  background: linear-gradient(180deg,#fff8e6 0%, var(--ui-paper) 100%);
  color: #2a2f2b;
  border: 1px solid #d6ccb1;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.35),
    0 0 0 2px rgba(184,255,74,.12);
}

/* Inputs */
[data-theme="nyma"] input,
[data-theme="nyma"] textarea,
[data-theme="nyma"] select{
  background: var(--ui-input-bg);
  border: 1px solid #2c3230;
  color: var(--ui-text);
}

/* Links & accent text */
[data-theme="nyma"] a,
[data-theme="nyma"] .accent{
  color: var(--ui-accent);
  text-shadow: 0 0 6px rgba(184,255,74,.25);
}

/* Focus ring — fine silver-green filigree */
[data-theme="nyma"] *:focus{
  outline: 2px solid rgba(184,255,74,.75);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(13,18,15,.8);
}

/* Selection highlight */
[data-theme="nyma"] ::selection{
  background: rgba(184,255,74,.28);
  color: #0e120f;
}

/* Optional: parchment toolbar or header */
[data-theme="nyma"] .toolbar.parchment,
[data-theme="nyma"] .header.parchment{
  background: linear-gradient(180deg,#fff8e6 0%,#efe6cd 100%);
  color: #2a2f2b;
  border-bottom: 1px solid #d6ccb1;
}

/* Subtle smoky app background */
[data-theme="nyma"] body,
[data-theme="nyma"] .app-root{
  background:
    radial-gradient(60% 50% at 80% 10%, rgba(184,255,74,.06) 0%, transparent 60%),
    radial-gradient(40% 35% at 10% 90%, rgba(184,255,74,.04) 0%, transparent 60%),
    #171c1a;
}

/* Mirium — the Frost Huntress (frosty dark, smoke, fur, blood & bone) */
[data-theme="mirium"]{
  color-scheme: dark;

  /* Core palette (cold smoke + ice) */
  --ui-bg:         #0c0f14;   /* midnight coal */
  --ui-surface:    #11151b;   /* smoked panel */
  --ui-text:       #e8edf2;   /* icy bone white */
  --ui-muted:      #9aa7b5;   /* cold grey */
  --ui-border:     #1e2430;   /* slate */
  --ui-input-bg:   #0f1319;   /* fields */

  /* Accents */
  --ui-accent:     #c01826;   /* blood red */
  --ui-accent-ink: #170103;   /* ink on blood */

  /* Auxiliary tones for decorative effects */
  --ui-ice:        #a9e0ff;   /* glacial glow */
  --ui-bone:       #e8e3d9;   /* weathered bone */
}

/* Frosted panels: smoke gradient with icy bloom */
[data-theme="mirium"] section,
[data-theme="mirium"] .panel{
  background:
    radial-gradient(110% 70% at 8% -10%, rgba(169,224,255,.10) 0%, transparent 65%),
    radial-gradient(80% 60% at 100% 0%, rgba(169,224,255,.06) 0%, transparent 70%),
    linear-gradient(145deg,#12171e 0%,#0f141a 55%,#0d1116 100%);
  border: 1px solid var(--ui-border);
  box-shadow:
    inset 0 0 0 1px rgba(169,224,255,.05),
    0 12px 28px rgba(0,0,0,.45);
  backdrop-filter: saturate(110%) blur(1.2px);
}

/* Primary controls — lacquered blood with icy rim */
[data-theme="mirium"] .btn.primary,
[data-theme="mirium"] .zoom-btn.active{
  background: linear-gradient(135deg,#e31d35 0%,#b01322 60%,#770d1a 100%);
  color: var(--ui-text);
  border-color: rgba(169,224,255,.35);
  box-shadow:
    0 0 0 1px rgba(169,224,255,.35),
    0 0 16px rgba(195,24,38,.35);
}

/* Chips / badges — bone tabs with faint blood halo */
[data-theme="mirium"] .badge,
[data-theme="mirium"] .pill{
  background: linear-gradient(180deg,#f6f3ec 0%, var(--ui-bone) 100%);
  color: #1a1b1d;
  border: 1px solid #cfc7b8;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.35),
    0 0 0 2px rgba(192,24,38,.12);
}

/* Inputs */
[data-theme="mirium"] input,
[data-theme="mirium"] textarea,
[data-theme="mirium"] select{
  background: var(--ui-input-bg);
  border: 1px solid #26303c;
  color: var(--ui-text);
}

/* Links & accent text */
[data-theme="mirium"] a,
[data-theme="mirium"] .accent{
  color: var(--ui-accent);
  text-shadow: 0 0 8px rgba(169,224,255,.20);
}

/* Focus ring — ice rim with blood-core */
[data-theme="mirium"] *:focus{
  outline: 2px solid rgba(169,224,255,.85);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(192,24,38,.35);
}

/* Selection highlight — cold slate */
[data-theme="mirium"] ::selection{
  background: #23354a;
  color: #ffffff;
}

/* Optional: subtle “fur” tooth on app background */
[data-theme="mirium"] body,
[data-theme="mirium"] .app-root{
  background:
    radial-gradient(60% 50% at 90% 8%, rgba(169,224,255,.05) 0%, transparent 60%),
    repeating-linear-gradient( 115deg,
      rgba(255,255,255,.015) 0px, rgba(255,255,255,.015) 2px,
      transparent 2px, transparent 6px),
    #0c0f14;
}

/* Zarek — God of Forge, Inventions & War (iron + glowing forge) */
[data-theme="zarek"]{
  color-scheme: dark;

  /* Core palette (gunmetal + smoke) */
  --ui-bg:         #0d0f13;   /* coal black with blue steel tint */
  --ui-surface:    #14181e;   /* iron plate */
  --ui-text:       #e8ebf0;   /* cool silver */
  --ui-muted:      #9aa3ad;   /* steel gray */
  --ui-border:     #262c35;   /* gunmetal edge */
  --ui-input-bg:   #10141a;   /* fields */

  /* Accents — molten core */
  --ui-accent:     #ff7a1a;   /* forge orange */
  --ui-accent-ink: #1a0c00;   /* ink on molten */

  /* Extras */
  --ui-ember:      #ffd166;   /* yellow ember highlights */
  --ui-iron:       #98a4b3;   /* brushed steel highlight */
}

/* Iron panels with ember bloom + brushed texture */
[data-theme="zarek"] section,
[data-theme="zarek"] .panel{
  background:
    radial-gradient(120% 90% at 10% -15%, rgba(255,122,26,.08) 0%, transparent 65%),
    radial-gradient(80% 60% at 100% 0%, rgba(255,209,102,.05) 0%, transparent 70%),
    repeating-linear-gradient( 110deg,
      rgba(255,255,255,.015) 0 2px,
      rgba(0,0,0,.015) 2px 6px),
    linear-gradient(145deg,#181d25 0%,#12171d 55%,#0f1319 100%);
  border: 1px solid var(--ui-border);
  box-shadow:
    inset 0 0 0 1px rgba(152,164,179,.07),
    0 12px 28px rgba(0,0,0,.45);
  backdrop-filter: saturate(110%) blur(1px);
}

/* Primary controls — lacquered molten with silver rim */
[data-theme="zarek"] .btn.primary,
[data-theme="zarek"] .zoom-btn.active{
  background: linear-gradient(135deg,#ff9933 0%,#e76916 60%,#b24a10 100%);
  color: var(--ui-text);
  border-color: rgba(152,164,179,.45);
  box-shadow:
    0 0 0 1px rgba(255,209,102,.45),
    0 0 16px rgba(255,122,26,.35);
}

/* Chips / badges — brushed steel tags with ember bevel */
[data-theme="zarek"] .badge,
[data-theme="zarek"] .pill{
  background:
    linear-gradient(180deg,#f4f6f9 0%,#d9dee5 100%);
  color: #20252c;
  border: 1px solid #b3bcc7;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.35),
    0 0 0 2px rgba(255,122,26,.12);
}

/* Inputs */
[data-theme="zarek"] input,
[data-theme="zarek"] textarea,
[data-theme="zarek"] select{
  background: var(--ui-input-bg);
  border: 1px solid #2b323c;
  color: var(--ui-text);
}

/* Links & accent text */
[data-theme="zarek"] a,
[data-theme="zarek"] .accent{
  color: var(--ui-accent);
  text-shadow: 0 0 6px rgba(255,122,26,.25);
}

/* Focus ring — silver edge with ember glow */
[data-theme="zarek"] *:focus{
  outline: 2px solid rgba(152,164,179,.85);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(255,122,26,.35);
}

/* Selection — hot iron */
[data-theme="zarek"] ::selection{
  background: #5a2a12;
  color: #ffffff;
}

/* Optional: smokey shop floor */
[data-theme="zarek"] body,
[data-theme="zarek"] .app-root{
  background:
    radial-gradient(60% 50% at 90% 8%, rgba(255,122,26,.05) 0%, transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.35)),
    #0d0f13;
}

/* Joroth — Fortitude, Virtue & War (sunlit stone + embers) */
[data-theme="joroth"]{
  color-scheme: light;

  /* Sunlit stone base */
  --ui-bg:         #f6f4ef;   /* warm parchment/stone */
  --ui-surface:    #ffffff;   /* bright slab */
  --ui-text:       #1b1f2b;   /* deep slate ink */
  --ui-muted:      #666c7d;   /* cool ash */
  --ui-border:     #dcdfe8;   /* pale granite edge */
  --ui-input-bg:   #ffffff;

  /* Fire / spotlight */
  --ui-accent:     #ff8a1f;   /* heroic orange */
  --ui-accent-ink: #3a1700;   /* ink on fire */

  /* Extras */
  --ui-ember:      #ffd693;   /* hot ember */
  --ui-stone:      #8d92a3;   /* stone highlight */
}

/* Panels — bright stone with subtle orange spotlights */
[data-theme="joroth"] section,
[data-theme="joroth"] .panel{
  background:
    radial-gradient(120% 90% at 12% -18%, rgba(255,138,31,.10) 0%, rgba(255,138,31,0) 60%),
    linear-gradient(145deg,#ffffff 0%,#fbfaf7 55%,#f6f4ef 100%);
  border: 1px solid var(--ui-border);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.9),
    0 10px 24px rgba(27,31,43,.06);
}

/* Primary controls — molten stripe with stone rim */
[data-theme="joroth"] .btn.primary,
[data-theme="joroth"] .zoom-btn.active{
  background: linear-gradient(135deg,#ffb267 0%,#ff8a1f 55%,#cc5e12 100%);
  color: #ffffff;
  border-color: rgba(141,146,163,.45);
  box-shadow:
    0 0 0 1px rgba(255,214,147,.55),
    0 0 14px rgba(255,138,31,.28);
}

/* Chips / badges — carved stone with ember edge */
[data-theme="joroth"] .badge,
[data-theme="joroth"] .pill{
  background: linear-gradient(180deg,#ffffff 0%,#eef1f7 100%);
  color: #222432;
  border: 1px solid #cfd5e2;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.6),
    0 0 0 2px rgba(255,138,31,.12);
}

/* Inputs */
[data-theme="joroth"] input,
[data-theme="joroth"] textarea,
[data-theme="joroth"] select{
  background: var(--ui-input-bg);
  border: 1px solid #cfd5e2;
  color: var(--ui-text);
}

/* Links / emphasis */
[data-theme="joroth"] a,
[data-theme="joroth"] .accent{
  color: var(--ui-accent);
  text-shadow: 0 0 4px rgba(255,138,31,.18);
}

/* Focus ring — fine stone edge with orange halo */
[data-theme="joroth"] *:focus{
  outline: 2px solid rgba(141,146,163,.9);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px rgba(255,138,31,.28);
}

/* Selection — warm ember wash */
[data-theme="joroth"] ::selection{
  background: #ffe4c4;
  color: #1b1f2b;
}

/* App background — sunlit quarry */
[data-theme="joroth"] body,
[data-theme="joroth"] .app-root{
  background:
    radial-gradient(60% 50% at 90% 8%, rgba(255,138,31,.08) 0%, transparent 60%),
    linear-gradient(180deg,#ffffff 0%,#f6f4ef 100%);
}

/* ================================
   SPIRIT Overdrive — neon + holo
   ================================ */
[data-theme="spirit-overdrive"]{
  color-scheme: dark;

  /* Core */
  --ui-bg:         #0a0614;   /* deep violet-black */
  --ui-surface:    #100a1f;   /* rich plum */
  --ui-text:       #f7f9ff;   /* cool white */
  --ui-muted:      #bfc4d9;   /* lavender-gray */
  --ui-border:     #2b2244;   /* dark violet edge */
  --ui-input-bg:   #0d0818;

  /* Signature neon accents */
  --ui-accent:     #9BFF3A;   /* toxic lime */
  --ui-accent-ink: #061103;

  /* Holographic ramp used in borders + badges */
  --holo-1: #91ff2b;
  --holo-2: #19e2ff;
  --holo-3: #8f4dff;
  --holo-4: #ff1fb8;
  --holo-5: #ffb02e;

  /* Animation speeds (tweak if needed) */
  --fx-speed: 12s;
  --sheen-speed: 2.8s;
  --pulse-speed: 3.4s;
}

/* ===== App background: aurora + star specks ===== */
[data-theme="spirit-overdrive"] .app-root{
  position: relative;
  background:
    radial-gradient(60% 55% at 15% 0%, rgba(155,255,58,.08) 0%, transparent 70%),
    radial-gradient(50% 45% at 90% 15%, rgba(25,226,255,.08) 0%, transparent 70%),
    linear-gradient(180deg, #0c0817 0%, #0a0614 100%);
  overflow: hidden;
}
[data-theme="spirit-overdrive"] .app-root::before,
[data-theme="spirit-overdrive"] .app-root::after{
  content:"";
  position: absolute; inset: -20% -10%;
  pointer-events: none;
}
[data-theme="spirit-overdrive"] .app-root::before{
  background:
    radial-gradient(35% 25% at 20% 20%, rgba(143,77,255,.25) 0%, transparent 60%),
    radial-gradient(25% 30% at 80% 10%, rgba(255,31,184,.22) 0%, transparent 70%),
    radial-gradient(30% 25% at 50% 95%, rgba(25,226,255,.20) 0%, transparent 70%);
  filter: blur(18px);
  animation: spirit-float var(--fx-speed) linear infinite;
}
[data-theme="spirit-overdrive"] .app-root::after{
  background:
    radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.35) 0 60%, transparent 61%),
    radial-gradient(1.5px 1.5px at 70% 20%, rgba(255,255,255,.3) 0 60%, transparent 61%),
    radial-gradient(1.8px 1.8px at 40% 80%, rgba(255,255,255,.28) 0 60%, transparent 61%);
  animation: star-twinkle 6s ease-in-out infinite;
}

/* ===== Panels: rolling holographic border + soft inner glow ===== */
[data-theme="spirit-overdrive"] section,
[data-theme="spirit-overdrive"] .panel{
  position: relative;
  background:
    linear-gradient(145deg,#171134 0%,#110b23 55%,#0e091d 100%);
  border-radius: 16px;
  border: 1px solid transparent; /* base for Safari */
  box-shadow:
    inset 0 0 30px rgba(155,255,58,.05),
    0 10px 28px rgba(0,0,0,.45);
  overflow: hidden;
}
[data-theme="spirit-overdrive"] section::before,
[data-theme="spirit-overdrive"] .panel::before{

}
[data-theme="spirit-overdrive"] section::after,
[data-theme="spirit-overdrive"] .panel::after{
  /* Outer neon bloom */
  content:""; position:absolute; inset:-10px;
  border-radius: inherit;
  background: radial-gradient(90% 70% at 10% 10%, rgba(155,255,58,.25) 0%, transparent 60%);
  filter: blur(18px);
  z-index:-1;
  animation: pulse var(--pulse-speed) ease-in-out infinite;
}


[data-theme="spirit-overdrive"] .btn.primary::after,
[data-theme="spirit-overdrive"] .zoom-btn.active::after{
  /* Sheen sweep */
  content:""; position:absolute; inset:-2px;
  background: linear-gradient(120deg, transparent 25%, rgba(255,255,255,.4) 48%, transparent 55%);
  border-radius: inherit;
  mix-blend-mode: screen;
  transform: translateX(-120%);
  animation: sheen var(--sheen-speed) ease-in-out infinite;
}
[data-theme="spirit-overdrive"] .btn.primary:hover{
  box-shadow:
    0 0 0 1px rgba(255,255,255,.35),
    0 0 32px rgba(143,77,255,.42),
    0 14px 34px rgba(0,0,0,.55);
  transform: none; /* prevents scrollbar flicker */
}


/* ===== Badges / Pills: holographic foil ===== */
[data-theme="spirit-overdrive"] .badge,
[data-theme="spirit-overdrive"] .pill{
  background:
    linear-gradient(115deg,
      rgba(255,255,255,.85) 0%,
      rgba(255,255,255,.75) 12%,
      rgba(255,255,255,.92) 25%,
      rgba(255,255,255,.70) 35%,
      rgba(255,255,255,.85) 50%),
    conic-gradient(from .25turn,
      var(--holo-1),var(--holo-2),var(--holo-3),var(--holo-4),var(--holo-5),var(--holo-1));
  background-blend-mode: screen, normal;
  color: #141220;
  border: 1px solid rgba(255,255,255,.55);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.55),
    0 0 0 2px rgba(25,226,255,.15),
    0 6px 16px rgba(0,0,0,.35);
  animation: roll calc(var(--fx-speed) * .75) linear infinite;
}

/* ===== Form fields ===== */
[data-theme="spirit-overdrive"] input,
[data-theme="spirit-overdrive"] textarea,
[data-theme="spirit-overdrive"] select{
  background: var(--ui-input-bg);
  border: 1px solid #32285a;
  color: var(--ui-text);
  border-radius: 10px;
  box-shadow: inset 0 0 12px rgba(143,77,255,.12);
}
[data-theme="spirit-overdrive"] input:focus,
[data-theme="spirit-overdrive"] textarea:focus,
[data-theme="spirit-overdrive"] select:focus{
  outline: 2px solid rgba(155,255,58,.8);
  box-shadow:
    0 0 0 2px rgba(25,226,255,.35),
    0 0 18px rgba(143,77,255,.35);
  outline-offset: 2px;
}

/* ===== Text highlights ===== */
[data-theme="spirit-overdrive"] a,
[data-theme="spirit-overdrive"] .accent{ color: var(--ui-accent); }
[data-theme="spirit-overdrive"] ::selection{
  background: rgba(143,77,255,.45); color: #fff;
}

[data-theme="spirit-overdrive"] button:hover{
  filter: none;
  background: rgba(155,255,58,.10);
  border-color: rgba(155,255,58,.35);
}

[data-theme="spirit-overdrive"] button:focus-visible{
  outline: 2px solid rgba(25,226,255,.85);
  outline-offset: 2px;
}

[data-theme="spirit-overdrive"] .app-grid > section{
  scrollbar-color: rgba(155,255,58,.35) transparent;
}
[data-theme="spirit-overdrive"] .app-grid > section::-webkit-scrollbar{ width: 10px; }
[data-theme="spirit-overdrive"] .app-grid > section::-webkit-scrollbar-thumb{
  background: rgba(155,255,58,.35);
  border-radius: 999px;
  border: 2px solid transparent;
  background-clip: content-box;
}

/* ===== Animations ===== */

@keyframes gradient-pan{
  0%{ background-position: 0% 50%; }
  50%{ background-position: 100% 50%; }
  100%{ background-position: 0% 50%; }
}
@keyframes sheen{
  0%{ transform: translateX(-120%); }
  60%{ transform: translateX(120%); }
  100%{ transform: translateX(120%); }
}
@keyframes pulse{
  0%,100%{ opacity:.5; filter: blur(18px) saturate(110%); }
  50%{ opacity:.9; filter: blur(22px) saturate(130%); }
}
@keyframes spirit-float{
  0%{ transform: translate3d(0,0,0) rotate(0deg); }
  50%{ transform: translate3d(2%,1%,0) rotate(1.5deg); }
  100%{ transform: translate3d(0,0,0) rotate(0deg); }
}
@keyframes star-twinkle{
  0%,100%{ opacity:.35; }
  50%{ opacity:.75; }
}

/* ===== Accessibility: Respect reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  [data-theme="spirit-overdrive"] .app-root::before,
  [data-theme="spirit-overdrive"] .app-root::after,
  [data-theme="spirit-overdrive"] section::before,
  [data-theme="spirit-overdrive"] .panel::before,
  [data-theme="spirit-overdrive"] .panel::after,
  [data-theme="spirit-overdrive"] .btn.primary,
  [data-theme="spirit-overdrive"] .btn.primary::after,
  [data-theme="spirit-overdrive"] .badge,
  [data-theme="spirit-overdrive"] .pill{
    animation: none !important;
  }
}




/* ================== APPLY THE UI VARIABLES ================================ */
html, body{ height:100%; }
body{
  background: var(--ui-bg);
  color: var(--ui-text);
}

/* Panels and simple elements use surface + borders */
.app-grid{ /* already centers via your gutters; colors come from vars */ }
section, .panel{
  background: var(--ui-surface);
  border: 1px solid var(--ui-border);
  border-radius: 10px;
  padding: 10px;
}

/* Prevent scrollbar flicker: reserve gutter space */
.app-grid > section{
  scrollbar-gutter: stable;
  overflow-x: hidden;
}


/* Forms */
input, select, textarea, button, label{ font: inherit; }
input, select, textarea{
  background: var(--ui-input-bg);
  color: var(--ui-text);
  border: 1px solid var(--ui-border);
  border-radius: 6px;
}
input::placeholder, textarea::placeholder{ color: var(--ui-muted); }

/* Buttons */
button{
  background: var(--ui-surface);
  color: var(--ui-text);
  border: 1px solid var(--ui-border);
  border-radius: 6px;
  cursor: pointer;
}
button:hover{ filter: brightness(1.05); }

/* Tiny accents for toggles / pills if you use them later */
.badge, .pill{
  background: var(--ui-accent);
  color: var(--ui-accent-ink);
}

/* Zoom toolbar (if you added it earlier) */
.zoom-group{ border-color: var(--ui-border); background: var(--ui-surface); }
.zoom-btn.on{
  background: var(--ui-accent) !important;
  color: var(--ui-accent-ink) !important;
  font-weight: 800;
}

/* Library “batch export” compact row & printer-friendly row keep working */
.toggle-row > span{ color: var(--ui-text); }

/* ===== Fix page gutters using theme background (no white ring) ===== */
html, body, #root{
  background: var(--ui-bg) !important;
  color: var(--ui-text);
}

/* ===== Zoom toolbar (class-based, themable) ===== */
.preview-toolbar{
  display:flex; justify-content:flex-start; margin:6px 0 8px;
}
.zoom-group{
  display:inline-flex; gap:0;
  border:1px solid var(--ui-border);
  border-radius:8px; overflow:hidden;
  background: var(--ui-surface);
}
.zoom-btn{
  padding:4px 10px; font-size:.85rem; border:0; background:transparent; cursor:pointer;
  color: var(--ui-text);
}
.zoom-btn + .zoom-btn{ border-left:1px solid var(--ui-border); }
.zoom-btn.on{
  background: var(--ui-accent);
  color: var(--ui-accent-ink);
  font-weight:800;
}

/* ===== Library list (dark-mode friendly) ===== */
.lib-list{
  list-style:none; padding:0; max-height:400px; overflow-y:auto;
  margin: 0;
}
.lib-item{
  display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px;
  border:1px solid var(--ui-border);
  background: var(--ui-surface);
  border-radius:8px;
  padding:6px 8px; margin-bottom:6px;
}
.lib-item.on{
  border-color: var(--ui-accent);
  box-shadow: inset 0 0 0 1px var(--ui-accent);
}
.lib-main{ cursor:pointer; display:grid; gap:2px; }
.lib-name{ font-weight:600; line-height:1.2; color: var(--ui-text); }
.lib-meta{
  font-size:12px; color: var(--ui-muted);
  display:flex; gap:6px; flex-wrap:wrap;
}
.lib-del{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  background:#e44;
  color:#fff;
  border:none;
  width:24px;
  height:24px;
  padding:0;
  line-height:1;           /* important for centering the glyph */
  font-weight:800;
  font-size:14px;
  border-radius:6px;
  cursor:pointer;
  transition:transform .05s ease, box-shadow .05s ease, filter .15s ease;
}
.lib-del:hover{ filter:brightness(0.95); }
.lib-del:active{ transform:translateY(1px); }
.lib-del:focus-visible{
  outline:2px solid rgba(0,0,0,.5);
  outline-offset:2px;
}

/* keep your theme override */
.lib-del,
[data-theme="spirit"] .lib-del{ background:#ff5c5c; color:#1b0e24; }


/* Optional: dark-theme danger color tweak */
[data-theme="dim"]  .lib-del,
[data-theme="spirit"] .lib-del{ background:#ff5c5c; color:#1b0e24; }

/* Buttons inside the Skills editor panel (affects SkillEditor’s add/remove) */
.skills-editor-panel button{
  background: var(--ui-surface) !important;
  color: var(--ui-text) !important;
  border: 1px solid var(--ui-border) !important;
  border-radius: 6px !important;
}

/* Optional variants if you add classNames to specific buttons later */
.skills-editor-panel .btn-ghost{
  background: transparent !important;
  color: var(--ui-accent) !important;
  border-color: var(--ui-border) !important;
}
.skills-editor-panel .btn-danger{
  background: #e44 !important; color:#fff !important; border-color: transparent !important;
}
[data-theme="dim"] .skills-editor-panel .btn-danger,
[data-theme="spirit"] .skills-editor-panel .btn-danger{
  background:#ff5c5c !important; color:#1b0e24 !important;
}

@keyframes slide-accent {
  0%   { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

/* Fallback: keep solid color (your current .card-name stays as-is) */

.accent-gradient .card-name,
.accent-gradient .flavor-name {
  /* fallback if background-clip: text isn't supported */
  color: var(--accent);
}

/* Progressive enhancement: only if clipping is supported */
@supports ((-webkit-background-clip: text) or (background-clip: text)) {
  .accent-gradient .card-name,
  .accent-gradient .flavor-name {
    color: transparent; /* show only the gradient */
    background-image: var(--accent-grad);
    -webkit-background-clip: text;
    background-clip: text;
    background-size: 200% 100%;
    animation: slide-accent var(--accent-grad-speed) linear infinite;
  }
}


/* Any element that used a solid accent background can opt into gradient via this class */
.use-accent-bg{
  background: var(--accent-grad, var(--accent));
}

/* Make sure the front overlay sits on top of everything */
.front .front-overlay { position: absolute; inset: 0; z-index: 3; pointer-events: none; }
/* Draw the gradient UNDER the overlay, INSIDE the rows */
.front .title-row,
.front .footer-row { position: relative; z-index: 2; }

.front .title-row::before,
.front .footer-row::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--accent-grad, var(--accent));
  /* subtle edges (no CSS Color 4 functions so exports don't crash) */
  box-shadow:
  inset 0 1px 0 rgba(255,255,255,.45),
  inset 0 -1px 0 rgba(0,0,0,.20);
  z-index: -1;        /* sits behind the text/content of the row */
  pointer-events: none;
}

/* Ensure the title fills the lane and never clips */
.front .title-row .card-name-wrap { height: 100%; display: flex; align-items: center; overflow: visible; }
.card-name-svg { display: block; width: 100%; height: 100%; overflow: visible; }

.skill-header .prof-wrap{
  height: var(--prof-title-h);
  display: flex; align-items: center; justify-content: flex-end;   /* ← right */
  justify-self: end;
  padding-right: var(--prof-title-pad-right, 0px);
}

.footer-right .rarity-wrap{
  height: var(--footer-rarity-h);
  display: flex; align-items: center; justify-content: flex-end;   /* right */
  padding-right: var(--footer-rarity-pad-right, 0px);
}

.skill-header .skill-title-wrap,
.skill-header .prof-wrap,
.footer-right .rarity-wrap { overflow: visible; }

/* Make the zoomed preview sit on top of other columns */
.app-grid { overflow: visible; }                /* allow overlap across columns */
.app-grid > aside { z-index: 50; }              /* the preview column */
.preview-wrap { position: relative; z-index: 60; }
.preview-scale { position: relative; z-index: 60; }

.app-grid { overflow: visible; }

.name-row {
  display: flex;
  align-items: center;
  gap: 8px;
  height: var(--card-name-h, 36px);
}

/* Wrap around the paragraphs inside a skill/section block */
.skill-paragraphs {
  display: block;
}

/* multi-column container */
.skill-cols { column-gap: 2px; column-fill: balance; }
.skill-cols.cols-1 { column-count: 1; }
.skill-cols.cols-2 { column-count: 2; }

/* paragraphs should not split across columns */
.skill-cols p.skill-text {
  break-inside: avoid-column;
  -webkit-column-break-inside: avoid;
  page-break-inside: avoid;
  margin: 0 0 4px;
  line-height: 1.10;
  white-space: normal;
}

/* force a column break after a blank line (between paragraphs) */
.skill-cols .col-break {
  display: block;
  height: 0; line-height: 0;
  break-after: column;
  -webkit-column-break-after: always; /* Safari/WebKit */
}

.skills p.skill-text .lb {
  display: none;
}


/* In 2-column mode, a “double break” jumps to the next column */
.skill-cols.cols-2 .col-break{
  display:block;
  height:0;           /* no extra vertical gaps */ 
  line-height:0;
  break-after: column;
  -webkit-column-break-after: always;  /* Safari/WebKit */
}

/* In 1-column mode, a “double break” is just extra vertical space */
.skill-cols.cols-1 .col-break{
  display:block;
  height: 0.6em;      /* adjust to taste */
  line-height:0;
  break-after: auto;
  -webkit-column-break-after: auto;    /* disable column jump */
}


/* alignment helpers */
.align { line-height: 1.25; }
.align.align-center,
.align.align-right { display: inline-block; width: 100%; }
.align.align-center { text-align: center; }
.align.align-right  { text-align: right;  }


.skills .li-bullet { display: inline-block; }

/* inline emoji-style icons */
.skills img.inline-ico.emoji{
  height: 1em;
  width: auto;
  vertical-align: -0.0em;
  margin: 0 0.08em;
}

/* size baseline for emoji icons */
.skills .emoji-wrap .emoji {
  height: 1em; /* the wrapper scales visually via transform */
  width: auto;
}

.bullet-dot{
  display:inline-block;
  width:1em;           /* aligns list text nicely */
  text-align:center;
  transform: translateY(-0.06em);
}

/* formatText helpers */
.ft-u { text-decoration: underline; }

.panel-summary{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  cursor:pointer;
  list-style:none;
  user-select:none;
  font-weight:700;
  margin:0;
}

.panel-summary::-webkit-details-marker{
  display:none;
}

